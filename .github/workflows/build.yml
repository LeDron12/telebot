name: Run tests

on:   [pull_request]

jobs: 
  MyTests:
    runs-on:  ubuntu-latest
    steps:
      - name: Checkout
        uses: actions/checkout@v2
        with:
          path: tb

      - name: Move tb dir
        run:  mv tb ~
        
      - name: Execute All Tests
        run:  |
              sudo apt-get update
              sudo apt install python3
              sudo apt install python3-pip
              pip3 install vk_api
              mv /home/runner/.local/lib/python3.8/site-packages/vk_api /usr/lib/python3/dist-packages
              mv /home/runner/.local/lib/python3.8/site-packages/vk_api-11.9.7.dist-info /usr/lib/python3/dist-packages
              cd ~/tb
              pip3 install -r requirements.txt
              sudo python3 utests.py
